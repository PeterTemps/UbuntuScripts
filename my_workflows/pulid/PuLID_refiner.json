{"last_node_id":95,"last_link_id":290,"nodes":[{"id":5,"type":"EmptyLatentImage","pos":[800,580],"size":{"0":210,"1":106},"flags":{},"order":0,"mode":0,"outputs":[{"name":"LATENT","type":"LATENT","links":[2],"slot_index":0}],"properties":{"Node name for S&R":"EmptyLatentImage"},"widgets_values":[768,1024,1]},{"id":35,"type":"PulidInsightFaceLoader","pos":[293,-75],"size":{"0":250.20968627929688,"1":58},"flags":{},"order":1,"mode":0,"outputs":[{"name":"FACEANALYSIS","type":"FACEANALYSIS","links":[62],"shape":3}],"properties":{"Node name for S&R":"PulidInsightFaceLoader"},"widgets_values":["CPU"]},{"id":34,"type":"PulidEvaClipLoader","pos":[337,-163],"size":{"0":210,"1":26},"flags":{},"order":2,"mode":0,"outputs":[{"name":"EVA_CLIP","type":"EVA_CLIP","links":[63],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"PulidEvaClipLoader"}},{"id":32,"type":"ApplyPulid","pos":[768,-188],"size":{"0":315,"1":230},"flags":{},"order":15,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":58},{"name":"pulid","type":"PULID","link":64,"slot_index":1},{"name":"eva_clip","type":"EVA_CLIP","link":63,"slot_index":2},{"name":"face_analysis","type":"FACEANALYSIS","link":62,"slot_index":3},{"name":"image","type":"IMAGE","link":175,"slot_index":4},{"name":"attn_mask","type":"MASK","link":null}],"outputs":[{"name":"MODEL","type":"MODEL","links":[59,232,271],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"ApplyPulid"},"widgets_values":["fidelity",0.75,0,1]},{"id":7,"type":"CLIPTextEncode","pos":[630,370],"size":{"0":385.78680419921875,"1":134.55963134765625},"flags":{},"order":11,"mode":0,"inputs":[{"name":"clip","type":"CLIP","link":48}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[6,69,273],"slot_index":0}],"properties":{"Node name for S&R":"CLIPTextEncode"},"widgets_values":["blurry, glitches, distorted, malformed, ill, artifacts, low resolution, bad quality, out of focus"]},{"id":6,"type":"CLIPTextEncode","pos":[620,160],"size":{"0":399.2564392089844,"1":139.46234130859375},"flags":{},"order":10,"mode":0,"inputs":[{"name":"clip","type":"CLIP","link":47}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[4,68,272],"slot_index":0}],"properties":{"Node name for S&R":"CLIPTextEncode"},"widgets_values":["closeup of a woman with fox ears and white hair listening to music in winter, cinematic, high quality, detailed, 4k"]},{"id":8,"type":"VAEDecode","pos":[1540,60],"size":{"0":140,"1":46},"flags":{},"order":18,"mode":0,"inputs":[{"name":"samples","type":"LATENT","link":7},{"name":"vae","type":"VAE","link":57}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[10,222,257],"slot_index":0}],"properties":{"Node name for S&R":"VAEDecode"}},{"id":80,"type":"ImageResize+","pos":[4060,760],"size":{"0":257.7743835449219,"1":176.30349731445312},"flags":{},"order":29,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":256},{"name":"width","type":"INT","link":254,"widget":{"name":"width"}},{"name":"height","type":"INT","link":255,"widget":{"name":"height"}}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[258],"shape":3,"slot_index":0},{"name":"width","type":"INT","links":null,"shape":3},{"name":"height","type":"INT","links":null,"shape":3}],"properties":{"Node name for S&R":"ImageResize+"},"widgets_values":[512,512,"lanczos","stretch","always",0]},{"id":67,"type":"FaceBoundingBox","pos":[2180,-130],"size":{"0":315,"1":186},"flags":{},"order":21,"mode":0,"inputs":[{"name":"analysis_models","type":"ANALYSIS_MODELS","link":221},{"name":"image","type":"IMAGE","link":222}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[225],"shape":6,"slot_index":0},{"name":"x","type":"INT","links":[260],"shape":6,"slot_index":1},{"name":"y","type":"INT","links":[261],"shape":6,"slot_index":2},{"name":"width","type":"INT","links":[254],"shape":6,"slot_index":3},{"name":"height","type":"INT","links":[255],"shape":6,"slot_index":4}],"properties":{"Node name for S&R":"FaceBoundingBox"},"widgets_values":[0,0.5,-1]},{"id":68,"type":"ImageResize+","pos":[2640,-330],"size":{"0":253.85357666015625,"1":218},"flags":{},"order":22,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":225}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[230,242],"shape":3,"slot_index":0},{"name":"width","type":"INT","links":null,"shape":3},{"name":"height","type":"INT","links":null,"shape":3}],"properties":{"Node name for S&R":"ImageResize+"},"widgets_values":[1024,0,"lanczos","stretch","always",0]},{"id":74,"type":"VAEEncode","pos":[2980,-80],"size":{"0":140,"1":46},"flags":{},"order":24,"mode":0,"inputs":[{"name":"pixels","type":"IMAGE","link":242},{"name":"vae","type":"VAE","link":243}],"outputs":[{"name":"LATENT","type":"LATENT","links":[244],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"VAEEncode"}},{"id":42,"type":"FaceEmbedDistance","pos":[3020,-480],"size":{"0":268.3653869628906,"1":170},"flags":{},"order":23,"mode":0,"inputs":[{"name":"analysis_models","type":"ANALYSIS_MODELS","link":83,"slot_index":0},{"name":"reference","type":"IMAGE","link":180},{"name":"image","type":"IMAGE","link":230}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[228],"shape":3,"slot_index":0},{"name":"distance","type":"FLOAT","links":null,"shape":3}],"properties":{"Node name for S&R":"FaceEmbedDistance"},"widgets_values":["cosine",100,0,true]},{"id":83,"type":"FaceEmbedDistance","pos":[4740,760],"size":{"0":268.3653869628906,"1":170},"flags":{},"order":33,"mode":0,"inputs":[{"name":"analysis_models","type":"ANALYSIS_MODELS","link":263,"slot_index":0},{"name":"reference","type":"IMAGE","link":264},{"name":"image","type":"IMAGE","link":266}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[267],"shape":3,"slot_index":0},{"name":"distance","type":"FLOAT","links":null,"shape":3}],"properties":{"Node name for S&R":"FaceEmbedDistance"},"widgets_values":["cosine",100,0,true]},{"id":84,"type":"ImageScaleBy","pos":[4760,560],"size":{"0":210,"1":83.70136260986328},"flags":{},"order":34,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":279}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[269],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"ImageScaleBy"},"widgets_values":["lanczos",1.5]},{"id":85,"type":"VAEEncode","pos":[5030,640],"size":{"0":140,"1":57.51971435546875},"flags":{},"order":37,"mode":0,"inputs":[{"name":"pixels","type":"IMAGE","link":269},{"name":"vae","type":"VAE","link":270}],"outputs":[{"name":"LATENT","type":"LATENT","links":[275],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"VAEEncode"}},{"id":87,"type":"VAEDecode","pos":[5580,580],"size":{"0":140,"1":46},"flags":{},"order":39,"mode":0,"inputs":[{"name":"samples","type":"LATENT","link":277},{"name":"vae","type":"VAE","link":276}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[283],"slot_index":0}],"properties":{"Node name for S&R":"VAEDecode"}},{"id":89,"type":"FaceEmbedDistance","pos":[5800,550],"size":{"0":268.3653869628906,"1":170},"flags":{},"order":40,"mode":0,"inputs":[{"name":"analysis_models","type":"ANALYSIS_MODELS","link":280,"slot_index":0},{"name":"reference","type":"IMAGE","link":281},{"name":"image","type":"IMAGE","link":283}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[284],"shape":3,"slot_index":0},{"name":"distance","type":"FLOAT","links":null,"shape":3}],"properties":{"Node name for S&R":"FaceEmbedDistance"},"widgets_values":["cosine",100,0,true]},{"id":88,"type":"PreviewImage","pos":[5800,800],"size":{"0":1207.9298095703125,"1":1641.3209228515625},"flags":{},"order":41,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":284}],"properties":{"Node name for S&R":"PreviewImage"}},{"id":82,"type":"PreviewImage","pos":[4750,1000],"size":{"0":854.5497436523438,"1":1134.8775634765625},"flags":{},"order":36,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":267}],"properties":{"Node name for S&R":"PreviewImage"}},{"id":71,"type":"PrepImageForClipVision","pos":[2430,750],"size":{"0":283.7611999511719,"1":106},"flags":{},"order":14,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":235}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[236],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"PrepImageForClipVision"},"widgets_values":["LANCZOS","top",0]},{"id":39,"type":"VAEDecode","pos":[3690,920],"size":{"0":140,"1":46},"flags":{},"order":27,"mode":0,"inputs":[{"name":"samples","type":"LATENT","link":73},{"name":"vae","type":"VAE","link":72}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[240,256,287],"slot_index":0}],"properties":{"Node name for S&R":"VAEDecode"}},{"id":72,"type":"FaceEmbedDistance","pos":[3950,410],"size":{"0":268.3653869628906,"1":170},"flags":{},"order":28,"mode":0,"inputs":[{"name":"analysis_models","type":"ANALYSIS_MODELS","link":237,"slot_index":0},{"name":"reference","type":"IMAGE","link":238},{"name":"image","type":"IMAGE","link":240}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[241],"shape":3,"slot_index":0},{"name":"distance","type":"FLOAT","links":null,"shape":3}],"properties":{"Node name for S&R":"FaceEmbedDistance"},"widgets_values":["cosine",100,0,true]},{"id":64,"type":"ImageCrop+","pos":[230,-1020],"size":{"0":315,"1":194},"flags":{},"order":12,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":214}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[235],"shape":3,"slot_index":0},{"name":"x","type":"INT","links":null,"shape":3},{"name":"y","type":"INT","links":null,"shape":3}],"properties":{"Node name for S&R":"ImageCrop+"},"widgets_values":[512,512,"center",0,0]},{"id":10,"type":"PreviewImage","pos":[1237,528],"size":{"0":847.6990356445312,"1":1082.607666015625},"flags":{},"order":20,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":10}],"properties":{"Node name for S&R":"PreviewImage"}},{"id":51,"type":"ImageBatchMultiple+","pos":[260,-560],"size":{"0":210,"1":138},"flags":{},"order":13,"mode":0,"inputs":[{"name":"image_1","type":"IMAGE","link":173},{"name":"image_2","type":"IMAGE","link":174},{"name":"image_3","type":"IMAGE","link":167},{"name":"image_4","type":"IMAGE","link":null},{"name":"image_5","type":"IMAGE","link":null}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[175,180,238,264,281],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"ImageBatchMultiple+"},"widgets_values":["lanczos"]},{"id":73,"type":"PreviewImage","pos":[4080,-30],"size":{"0":370,"1":360},"flags":{},"order":31,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":241}],"properties":{"Node name for S&R":"PreviewImage"}},{"id":40,"type":"PreviewImage","pos":[3160,-910],"size":{"0":330,"1":360},"flags":{},"order":25,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":228}],"properties":{"Node name for S&R":"PreviewImage"}},{"id":69,"type":"IPAdapterAdvanced","pos":[2850,640],"size":{"0":315,"1":278},"flags":{},"order":19,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":233},{"name":"ipadapter","type":"IPADAPTER","link":231,"slot_index":1},{"name":"image","type":"IMAGE","link":236},{"name":"image_negative","type":"IMAGE","link":null},{"name":"attn_mask","type":"MASK","link":null},{"name":"clip_vision","type":"CLIP_VISION","link":null}],"outputs":[{"name":"MODEL","type":"MODEL","links":[234],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"IPAdapterAdvanced"},"widgets_values":[0.5,"linear","concat",0,0.9,"V only"]},{"id":92,"type":"LoadCLIPSegModels+","pos":[3776,1108],"size":{"0":210,"1":26},"flags":{},"order":3,"mode":0,"outputs":[{"name":"CLIP_SEG","type":"CLIP_SEG","links":[286],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"LoadCLIPSegModels+"}},{"id":81,"type":"ImageCompositeMasked","pos":[4430,850],"size":{"0":212.33274841308594,"1":146},"flags":{},"order":32,"mode":0,"inputs":[{"name":"destination","type":"IMAGE","link":257},{"name":"source","type":"IMAGE","link":258},{"name":"mask","type":"MASK","link":288},{"name":"x","type":"INT","link":260,"widget":{"name":"x"}},{"name":"y","type":"INT","link":261,"widget":{"name":"y"}}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[266,279,289],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"ImageCompositeMasked"},"widgets_values":[0,0,false]},{"id":94,"type":"PreviewImage","pos":[4422,1060],"size":{"0":210,"1":246},"flags":{},"order":35,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":289}],"properties":{"Node name for S&R":"PreviewImage"}},{"id":93,"type":"ApplyCLIPSeg+","pos":[4066,1008],"size":{"0":244.55487060546875,"1":174},"flags":{},"order":30,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":287},{"name":"clip_seg","type":"CLIP_SEG","link":286}],"outputs":[{"name":"MASK","type":"MASK","links":[288],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"ApplyCLIPSeg+"},"widgets_values":["face",0.4,21,2,23]},{"id":33,"type":"PulidModelLoader","pos":[218,-266],"size":{"0":315,"1":58},"flags":{},"order":4,"mode":0,"outputs":[{"name":"PULID","type":"PULID","links":[64],"shape":3}],"properties":{"Node name for S&R":"PulidModelLoader"},"widgets_values":["ip-adapter_pulid_sdxl_fp16.safetensors"]},{"id":27,"type":"CheckpointLoaderSimple","pos":[166,91],"size":{"0":315,"1":98},"flags":{},"order":5,"mode":0,"outputs":[{"name":"MODEL","type":"MODEL","links":[58],"shape":3,"slot_index":0},{"name":"CLIP","type":"CLIP","links":[47,48],"shape":3,"slot_index":1},{"name":"VAE","type":"VAE","links":[57,72,243,270,276],"shape":3,"slot_index":2}],"properties":{"Node name for S&R":"CheckpointLoaderSimple"},"widgets_values":["Juggernaut_X_RunDiffusion.safetensors"]},{"id":43,"type":"FaceAnalysisModels","pos":[1800,-690],"size":{"0":210,"1":82},"flags":{},"order":6,"mode":0,"outputs":[{"name":"ANALYSIS_MODELS","type":"ANALYSIS_MODELS","links":[83,221,237,263,280],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"FaceAnalysisModels"},"widgets_values":["insightface","CPU"]},{"id":50,"type":"LoadImage","pos":[-270,-1040],"size":{"0":315,"1":314},"flags":{},"order":7,"mode":0,"outputs":[{"name":"IMAGE","type":"IMAGE","links":[174,214],"shape":3,"slot_index":0},{"name":"MASK","type":"MASK","links":null,"shape":3}],"properties":{"Node name for S&R":"LoadImage"},"widgets_values":["00001-2556967809 (2).jpg","image"]},{"id":49,"type":"LoadImage","pos":[-270,-690],"size":{"0":315,"1":314},"flags":{},"order":8,"mode":0,"outputs":[{"name":"IMAGE","type":"IMAGE","links":[173],"shape":3,"slot_index":0},{"name":"MASK","type":"MASK","links":null,"shape":3}],"properties":{"Node name for S&R":"LoadImage"},"widgets_values":["00002-2945251091.jpg","image"]},{"id":36,"type":"LoadImage","pos":[-270,-310],"size":{"0":315,"1":314},"flags":{},"order":9,"mode":0,"outputs":[{"name":"IMAGE","type":"IMAGE","links":[167],"shape":3,"slot_index":0},{"name":"MASK","type":"MASK","links":null,"shape":3}],"properties":{"Node name for S&R":"LoadImage"},"widgets_values":["00014-3186534929.jpg","image"]},{"id":3,"type":"KSampler","pos":[1210,50],"size":{"0":267.7171630859375,"1":262},"flags":{},"order":16,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":59},{"name":"positive","type":"CONDITIONING","link":4},{"name":"negative","type":"CONDITIONING","link":6},{"name":"latent_image","type":"LATENT","link":2}],"outputs":[{"name":"LATENT","type":"LATENT","links":[7],"slot_index":0}],"properties":{"Node name for S&R":"KSampler"},"widgets_values":[7,"fixed",20,1.8,"dpmpp_sde","karras",1]},{"id":70,"type":"IPAdapterUnifiedLoader","pos":[2430,600],"size":{"0":282.6116943359375,"1":78},"flags":{},"order":17,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":232},{"name":"ipadapter","type":"IPADAPTER","link":null}],"outputs":[{"name":"model","type":"MODEL","links":[233],"shape":3,"slot_index":0},{"name":"ipadapter","type":"IPADAPTER","links":[231],"shape":3}],"properties":{"Node name for S&R":"IPAdapterUnifiedLoader"},"widgets_values":["PLUS FACE (portraits)"]},{"id":38,"type":"KSampler","pos":[3330,650],"size":{"0":267.7171630859375,"1":262},"flags":{},"order":26,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":234},{"name":"positive","type":"CONDITIONING","link":68},{"name":"negative","type":"CONDITIONING","link":69},{"name":"latent_image","type":"LATENT","link":244}],"outputs":[{"name":"LATENT","type":"LATENT","links":[73],"slot_index":0}],"properties":{"Node name for S&R":"KSampler"},"widgets_values":[28,"fixed",20,1.8,"dpmpp_sde","karras",0.35000000000000003]},{"id":86,"type":"KSampler","pos":[5250,580],"size":{"0":267.7171630859375,"1":262},"flags":{},"order":38,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":271},{"name":"positive","type":"CONDITIONING","link":272},{"name":"negative","type":"CONDITIONING","link":273},{"name":"latent_image","type":"LATENT","link":275}],"outputs":[{"name":"LATENT","type":"LATENT","links":[277],"slot_index":0}],"properties":{"Node name for S&R":"KSampler"},"widgets_values":[8,"fixed",20,1.8,"dpmpp_sde","karras",0.3]}],"links":[[2,5,0,3,3,"LATENT"],[4,6,0,3,1,"CONDITIONING"],[6,7,0,3,2,"CONDITIONING"],[7,3,0,8,0,"LATENT"],[10,8,0,10,0,"IMAGE"],[47,27,1,6,0,"CLIP"],[48,27,1,7,0,"CLIP"],[57,27,2,8,1,"VAE"],[58,27,0,32,0,"MODEL"],[59,32,0,3,0,"MODEL"],[62,35,0,32,3,"FACEANALYSIS"],[63,34,0,32,2,"EVA_CLIP"],[64,33,0,32,1,"PULID"],[68,6,0,38,1,"CONDITIONING"],[69,7,0,38,2,"CONDITIONING"],[72,27,2,39,1,"VAE"],[73,38,0,39,0,"LATENT"],[83,43,0,42,0,"ANALYSIS_MODELS"],[167,36,0,51,2,"IMAGE"],[173,49,0,51,0,"IMAGE"],[174,50,0,51,1,"IMAGE"],[175,51,0,32,4,"IMAGE"],[180,51,0,42,1,"IMAGE"],[214,50,0,64,0,"IMAGE"],[221,43,0,67,0,"ANALYSIS_MODELS"],[222,8,0,67,1,"IMAGE"],[225,67,0,68,0,"IMAGE"],[228,42,0,40,0,"IMAGE"],[230,68,0,42,2,"IMAGE"],[231,70,1,69,1,"IPADAPTER"],[232,32,0,70,0,"MODEL"],[233,70,0,69,0,"MODEL"],[234,69,0,38,0,"MODEL"],[235,64,0,71,0,"IMAGE"],[236,71,0,69,2,"IMAGE"],[237,43,0,72,0,"ANALYSIS_MODELS"],[238,51,0,72,1,"IMAGE"],[240,39,0,72,2,"IMAGE"],[241,72,0,73,0,"IMAGE"],[242,68,0,74,0,"IMAGE"],[243,27,2,74,1,"VAE"],[244,74,0,38,3,"LATENT"],[254,67,3,80,1,"INT"],[255,67,4,80,2,"INT"],[256,39,0,80,0,"IMAGE"],[257,8,0,81,0,"IMAGE"],[258,80,0,81,1,"IMAGE"],[260,67,1,81,3,"INT"],[261,67,2,81,4,"INT"],[263,43,0,83,0,"ANALYSIS_MODELS"],[264,51,0,83,1,"IMAGE"],[266,81,0,83,2,"IMAGE"],[267,83,0,82,0,"IMAGE"],[269,84,0,85,0,"IMAGE"],[270,27,2,85,1,"VAE"],[271,32,0,86,0,"MODEL"],[272,6,0,86,1,"CONDITIONING"],[273,7,0,86,2,"CONDITIONING"],[275,85,0,86,3,"LATENT"],[276,27,2,87,1,"VAE"],[277,86,0,87,0,"LATENT"],[279,81,0,84,0,"IMAGE"],[280,43,0,89,0,"ANALYSIS_MODELS"],[281,51,0,89,1,"IMAGE"],[283,87,0,89,2,"IMAGE"],[284,89,0,88,0,"IMAGE"],[286,92,0,93,1,"CLIP_SEG"],[287,39,0,93,0,"IMAGE"],[288,93,0,81,2,"MASK"],[289,81,0,94,0,"IMAGE"]],"groups":[],"config":{},"extra":{"ds":{"scale":0.7247295000000015,"offset":[800.4929358411498,1140.463380434109]},"workspace_info":{"id":"83ecb148-8df2-4a13-a527-f361b0235687"}},"version":0.4}